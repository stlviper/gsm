/*! AUI Flat Pack - version 5.0 - generated 2013-02-06 00:02:11 -0500 */


(function(g){var e=g(document),j=(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)==8);var c=null;var b=(function(){var n=false;function l(q){if(!n&&q.which===1){n=true;e.bind("mouseup mouseleave",m);g(this).trigger("aui-button-invoke")}}function m(){e.unbind("mouseup mouseleave",m);setTimeout(function(){n=false},0)}function p(){if(!n){g(this).trigger("aui-button-invoke")}}function o(q){q.preventDefault()}if(typeof document.addEventListener==="undefined"){return{click:p,"click selectstart":o,mousedown:function(s){l.call(this,s);var t=this;var r=document.activeElement;if(r!==null){r.attachEvent("onbeforedeactivate",q);setTimeout(function(){r.detachEvent("onbeforedeactivate",q)},0)}function q(u){switch(u.toElement){case null:case t:case document.body:case document.documentElement:u.returnValue=false}}}}}return{click:p,"click mousedown":o,mousedown:l}})();var a={"aui-button-invoke":function(H,r){r=g.extend({selectFirst:true},r);var o=i(this);var n=g(this).addClass("active");var R=n.hasClass("aui-dropdown2-sub-trigger");var M=o.parent()[0];var P=o.next()[0];var D=g(this).attr("data-dropdown2-hide-location");if(D){var z=document.getElementById(D);if(z){M=g(z);P=undefined}else{throw new Error("The specified data-dropdown2-hide-location id doesn't exist")}}var t=r.$menu||n.closest(".aui-dropdown2-trigger-group");if(R){var E=n.closest(".aui-dropdown2");o.addClass(E.attr("class")).addClass("aui-dropdown2-sub-menu")}var s={click:function(T){var S=g(this);if(!p(S)){return}if(!S.hasClass("interactive")){L()}if(v(S)){F(S,{selectFirst:false});T.preventDefault()}},mousemove:function(){var T=g(this);var S=u(T);if(S){F(T,{selectFirst:false})}}};var N={"click focusin mousedown":function(S){var T=S.target;if(!d(T,o[0])&&!d(T,n[0])){L()}},keydown:function(U){if(U.shiftKey&&U.keyCode==9){J(-1)}else{switch(U.keyCode){case 13:var T=y();if(v(T)){F(T)}else{k(T[0])}break;case 27:A();break;case 37:var T=y();if(v(T)){var S=i(T);if(S.is(":visible")){o.trigger("aui-dropdown2-step-out");return}}if(R){A()}else{Q(-1)}break;case 38:J(-1);break;case 39:var T=y();if(v(T)){F(T)}else{Q(1)}break;case 40:J(1);break;case 9:J(1);break;default:return}}U.preventDefault()}};function C(S,T){S.each(function(){var U=g(this);U.attr("role",T);if(U.hasClass("checked")){U.attr("aria-checked","true");if(T=="radio"){U.closest("ul").attr("role","radiogroup")}}else{U.attr("aria-checked","false")}})}n.attr("aria-controls",n.attr("aria-owns"));if(j){o.removeClass("aui-dropdown2-tailed")}o.find(".disabled").attr("aria-disabled","true");o.find("li.hidden > a").addClass("disabled").attr("aria-disabled","true");C(o.find(".aui-dropdown2-checkbox"),"checkbox");C(o.find(".aui-dropdown2-radio"),"radio");function q(){var ab=n.offset();var af=n.outerWidth();var ae=o.outerWidth();var aa=g("body").outerWidth(true);var T=Math.max(parseInt(o.css("min-width"),10),af);var U=n.data("container")||false;var ad="left";if(j){var V=parseInt(o.css("border-left-width"),10)+parseInt(o.css("border-right-width"),10);ae=ae-V;T=T-V}if(!R){o.css("min-width",T+"px")}var W=ab.left,ac=ab.top+n.outerHeight();if(R){var Y=3;W=ab.left+E.outerWidth()-Y;ac=ab.top}if(aa<W+ae&&ae<=W+af){W=ab.left+af-ae;if(R){W=ab.left-ae}ad="right"}if(U){var S=n.closest(U),Z=n.offset().left+n.outerWidth(),X=Z+ae;if(T>=ae){ae=T}if(X>Z){W=Z-ae;ad="right"}if(j){W-=V}}o.attr({"data-dropdown2-alignment":ad,"aria-hidden":"false"}).css({display:"block",left:W+"px",top:ac+"px"});o.appendTo(document.body)}q();if(n.hasClass("toolbar-trigger")){o.addClass("aui-dropdown2-in-toolbar")}if(n.parent().hasClass("aui-buttons")){o.addClass("aui-dropdown2-in-buttons")}if(n.parents().hasClass("aui-header")){o.addClass("aui-dropdown2-in-header")}o.trigger("aui-dropdown2-show",r);if(r.selectFirst){m()}I("on");function A(){l();I("off");setTimeout(function(){o.css("display","none").css("min-width","").insertAfter(n).attr("aria-hidden","true");if(!R){n.removeClass("active")}y().removeClass("active");o.removeClass("aui-dropdown2-in-toolbar");o.removeClass("aui-dropdown2-in-buttons");if(P){o.insertBefore(P)}else{o.appendTo(M)}o.trigger("aui-dropdown2-hide")},0)}function L(){A();if(R){E.trigger("aui-dropdown2-hide-all")}}function G(S){if(R&&S.target===E[0]){A()}}function p(S){return !S.is(".disabled, [aria-disabled=true]")}function v(S){return S.hasClass("aui-dropdown2-sub-trigger")}function F(S,T){if(!v(S)){return}T=g.extend({},T,{$menu:t});var U=i(S);if(U.is(":visible")){U.trigger("aui-dropdown2-select-first")}else{S.trigger("aui-button-invoke",T)}}function y(){return o.find("a.active")}var w=null;function u(S){if(w&&w[0]===S[0]){return false}w=S;y().removeClass("active");if(p(S)){S.addClass("active")}o.trigger("aui-dropdown2-item-selected");x();return true}function m(){u(o.find("a:not(.disabled)").first())}function J(T){var S=o.find("> ul > li > a, > .aui-dropdown2-section > ul > li > a").not(".disabled");u(K(S,T,true))}function B(S){if(S.length>0){L();S.trigger("aui-button-invoke")}}function Q(S){B(K(t.find(".aui-dropdown2-trigger").not(".disabled, [aria-disabled=true], .aui-dropdown2-sub-trigger"),S,false))}function K(U,V,T){var S=U.index(U.filter(".active"));S+=(S<0&&V<0)?1:0;S+=V;if(T){S%=U.length}else{if(S<0){S=U.length}}return U.eq(S)}function O(){B(g(this))}function l(){if(c===N){e.unbind(N);c=null}}function x(){if(c===N){return}e.unbind(c);e.bind(N);c=N}function I(T){var U="bind";var S="delegate";if(T!=="on"){U="unbind";S="undelegate"}if(!R){t[S](".aui-dropdown2-trigger:not(.active)","mousemove",O);n[U]("aui-button-invoke",A)}else{E[U]("aui-dropdown2-hide aui-dropdown2-item-selected aui-dropdown2-step-out",G)}o[U]("aui-dropdown2-hide-all",L);o[S]("a",s);o[U]("aui-dropdown2-hide",x);o[U]("aui-dropdown2-select-first",m)}},mousedown:function(l){if(l.which===1){g(this).bind(f)}}};var f={mouseleave:function(){e.bind(h)},"mouseup mouseleave":function(){g(this).unbind(f)}};var h={mouseup:function(l){var m=g(l.target).closest(".aui-dropdown2 a, .aui-dropdown2-trigger")[0];if(m){setTimeout(function(){k(m)},0)}},"mouseup mouseleave":function(){g(this).unbind(h)}};function k(l){if(l.click){l.click()}else{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);l.dispatchEvent(m)}}function d(m,l){return(m===l)||g.contains(l,m)}function i(n){if(!(n instanceof jQuery)){n=g(n)}var o=n.attr("aria-owns"),l=n.attr("aria-haspopup"),m=document.getElementById(o);if(m){return g(m)}else{if(!o){throw new Error("Dropdown 2 trigger required attribute not set: aria-owns")}if(!l){throw new Error("Dropdown 2 trigger required attribute not set: aria-haspopup")}if(!m){throw new Error("Dropdown 2 trigger aria-owns attr set to nonexistent id: "+o)}throw new Error("Dropdown 2 trigger unknown error. I don't know what you did, but there's smoke everywhere. Consult the documentation.")}}e.delegate(".aui-dropdown2-trigger",b);e.delegate(".aui-dropdown2-trigger:not(.active):not([aria-disabled=true]),.aui-dropdown2-sub-trigger:not([aria-disabled=true])",a);e.delegate(".aui-dropdown2-checkbox:not(.disabled)","click",function(){var l=g(this);if(l.hasClass("checked")){l.removeClass("checked").attr("aria-checked","false");l.trigger("aui-dropdown2-item-uncheck")}else{l.addClass("checked").attr("aria-checked","true");l.trigger("aui-dropdown2-item-check")}});e.delegate(".aui-dropdown2-radio:not(.checked):not(.disabled)","click",function(){var l=g(this);var m=l.closest("ul").find(".checked");m.removeClass("checked").attr("aria-checked","false").trigger("aui-dropdown2-item-uncheck");l.addClass("checked").attr("aria-checked","true").trigger("aui-dropdown2-item-check")});e.delegate(".aui-dropdown2 a.disabled","click",function(l){l.preventDefault()})})(jQuery);
